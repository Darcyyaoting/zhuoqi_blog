<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>卓奇的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="卓奇的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="卓奇的博客">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="卓奇的博客">
  
    <link rel="alternate" href="/atom.xml" title="卓奇的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">卓奇的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">--记录知识</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-linux/linux vi 中替换不可见字符" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/02/linux/linux vi 中替换不可见字符/" class="article-date">
  <time datetime="2020-04-02T09:33:57.000Z" itemprop="datePublished">2020-04-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/02/linux/linux vi 中替换不可见字符/">Linux Vi 中替换不可见字符</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>如替换^@用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/\%x00/ /g</span><br></pre></td></tr></table></figure></p>
<p>资料<br><a href="http://unix.stackexchange.com/questions/217010/search-and-replace-control-characters-m-i-in-vi" target="_blank" rel="noopener">http://unix.stackexchange.com/questions/217010/search-and-replace-control-characters-m-i-in-vi</a><br><a href="http://bbs.csdn.net/topics/350032198" target="_blank" rel="noopener">http://bbs.csdn.net/topics/350032198</a><br><a href="http://www.bubuko.com/infodetail-1597967.html" target="_blank" rel="noopener">http://www.bubuko.com/infodetail-1597967.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/04/02/linux/linux vi 中替换不可见字符/" data-id="ck8n5sxag0019p8lw9n6afm01" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="posts-linux/删除中文名文件" class="article article-type-posts" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/03/03/linux/删除中文名文件/" class="article-date">
  <time datetime="2020-03-03T09:06:27.000Z" itemprop="datePublished">2020-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/03/linux/删除中文名文件/">删除中文名文件.Md</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Linux上文件名包含中文的无法直接 <code>rm</code> 删除 ：</p>
<p>首先找到inode节点<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -i</span><br></pre></td></tr></table></figure></p>
<p>然后删除<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./ -inum 537083 -exec rm &#123;&#125; \;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/03/03/linux/删除中文名文件/" data-id="ck8n5sxat001mp8lw895m3ti0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hive/groupby" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/02/hive/groupby/" class="article-date">
  <time datetime="2019-11-02T10:15:11.000Z" itemprop="datePublished">2019-11-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/02/hive/groupby/">Groupby</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>数据处理过程中，我们通常需要对各个维度进行交叉分析，如果只有GROUP BY子句，那我们可以写出按各个维度或层次进行GROUP BY的查询语句，然后再通过UNION子句把结果集拼凑起来，但是这样的查询语句显得冗长、笨拙。       </p>
<p>为了解决HQL冗长的问题，下面我们介绍一下HIVE提供的一些语法：</p>
<ul>
<li><p>group by 后使用 grouping sets</p>
<p>  因为涉及UNION操作，所以为了遵循UNION对参与合并的数据集合的要求，GROUPING SETS会把在单个GROUP BY逻辑中没有参与GROUP BY的那一列置为NULL值，使它成为常量占位列。这样聚合出来的结果，未被GROUP BY的列将显示为NULL。</p>
<p>  group by后带grouping sets子句效果就是只返回小记记录，即只返回按单个列分组后的统计数据，不返回多个列组合分组的统计数据。</p>
<p>  例1：Group by grouping sets(A)</p>
<p>  产生的分组种数：1种；</p>
<p>  第一种：group by A</p>
<p>  返回结果集：即为以上一种分组的统计结果集。</p>
<p>  例2：Group by grouping sets(A ,B)</p>
<p>  产生的分组种数：2种；</p>
<p>  第一种：group by A</p>
<p>  第二种：group by B</p>
<p>  返回结果集：为以上两种分组统计结果集的并集且未去掉重复数据。</p>
<p>  例3：Group by grouping sets (A ,B,C)</p>
<p>  产生的分组种数：3种；</p>
<p>  第一种：group by A</p>
<p>  第二种：group by B</p>
<p>  第三种：group by C</p>
<p>  返回结果集：为以上三种分组统计结果集的并集且未去掉重复数据。</p>
<p>  例4：Group by A, B, C grouping sets (A ,B,C，（A ,B）)</p>
<p>  产生的分组种数：4种；</p>
<p>  第一种：group by A</p>
<p>  第二种：group by B</p>
<p>  第三种：group by C</p>
<p>  第四种：group by A, B</p>
<p>  返回结果集：为以上四种分组统计结果集的并集且未去掉重复数据。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Aggregate Query with GROUPING SETS</th>
<th>Equivalent Aggregate Query with GROUP</th>
</tr>
</thead>
<tbody>
<tr>
<td>SELECT a, b, SUM( c ) FROM tab1 GROUP BY a, b GROUPING SETS ( (a, b), a, b, ( ) )</td>
<td>SELECT a, b, SUM( c ) FROM tab1 GROUP BY a, b  UNION  SELECT a, null, SUM( c ) FROM tab1 GROUP BY a, null  UNION  SELECT null, b, SUM( c ) FROM tab1 GROUP BY null, b  UNION  SELECT null, null, SUM( c ) FROM tab1 </td>
</tr>
</tbody>
</table>
<ul>
<li><p>group by后使用rollup子句总结</p>
<p>  group by后带rollup子句的功能可以理解为：先按一定的规则产生多种分组，然后按各种分组统计数据（至于统计出的数据是求和还是最大值还是平均值等这就取决于SELECT后的聚合函数）。因此要搞懂group by后带rollup子句的用法主要是搞懂它是如何按一定的规则产生多种分组的。另group by后带rollup子句所返回的结果集，可以理解为各个分组所产生的结果集的并集且没有去掉重复数据。下面举例说明：</p>
<p>  1、对比没有带rollup的goup by</p>
<p>  例：Group by A ,B</p>
<p>  产生的分组种数：1种；</p>
<p>  即group by A,B</p>
<p>  返回结果集：也就是这一种分组的结果集。</p>
<p>  2、group by后带rollup</p>
<p>  例1：Group by A,B with rollup</p>
<p>  产生的分组种数：3种；</p>
<p>  第一种：group by A,B</p>
<p>  第二种：group by A</p>
<p>  第三种：group by NULL</p>
<p>  （说明：本没有group by NULL 的写法，在这里指是为了方便说明，而采用之。含义是：没有分组，也就是所有数据做一个统计。例如聚合函数是SUM的话，那就是对所有满足条件的数据进行求和。此写法的含义下同)</p>
<p>  返回结果集：为以上三种分组统计结果集的并集且未去掉重复数据。</p>
</li>
<li><p>group by后带rollup子句与group by后带cube子句区别</p>
<p>  group by后带rollup子句与group by后带cube子句的唯一区别就是：</p>
<p>  带cube子句的group by会产生更多的分组统计数据。cube后的列有多少种组合（注意组合是与顺序无关的）就会有多少种分组。</p>
<p>  例：Group by A ,B,C with cube</p>
<p>  产生的分组种数：8种；</p>
<p>  第一种：group by A,B,C</p>
<p>  第二种：group by A,B</p>
<p>  第三种：group by A,C</p>
<p>  第四种：group by B,C</p>
<p>  第五种：group by C</p>
<p>  第六种：group by B</p>
<p>  第七种：group by A</p>
<p>  第八种：group by NULL</p>
<p>  返回结果集：为以上八种分组统计结果集的并集且未去掉重复数据。</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/02/hive/groupby/" data-id="ck8n5sx9p000ep8lwuz4ph4z8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux/rz传大文件连接经常断开解决办法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/01/linux/rz传大文件连接经常断开解决办法/" class="article-date">
  <time datetime="2019-11-01T07:05:16.000Z" itemprop="datePublished">2019-11-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/01/linux/rz传大文件连接经常断开解决办法/">Rz传大文件连接经常断开解决办法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rz -bey</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/11/01/linux/rz传大文件连接经常断开解决办法/" data-id="ck8n5sxam001fp8lwmmf8c8yt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hive/hive导入txt" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/16/hive/hive导入txt/" class="article-date">
  <time datetime="2019-10-16T08:53:29.000Z" itemprop="datePublished">2019-10-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/16/hive/hive导入txt/">Hive导入txt</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>create table test_t(k string, v string) row format delimited fields terminated by ‘\t’ stored as textfile;</p>
<p>load data local inpath ‘/tmp/input.txt’ into table test_t;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/10/16/hive/hive导入txt/" data-id="ck8n5sx9v000ip8lw1md72wa4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-mac/mac查看隐藏文件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/22/mac/mac查看隐藏文件/" class="article-date">
  <time datetime="2019-09-22T14:13:18.000Z" itemprop="datePublished">2019-09-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/22/mac/mac查看隐藏文件/">Mac查看隐藏文件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Mac OS X上，如果需要查看.git目录下的隐藏文件，操作很简单：<br>做法是：打开一个Terminal终端窗口，输入：</p>
<p>defaults write com.apple.finder AppleShowAllFiles TRUE</p>
<p>然后重启Finder，输入：</p>
<p>killall Finder</p>
<p>如果你完成了需要的操作，恢复隐藏设置，同样打开Terminal终端窗口，输入：</p>
<p>defaults write com.apple.finder AppleShowAllFiles FALSE</p>
<p>然后重启Finder，输入：</p>
<p>killall Finder</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/09/22/mac/mac查看隐藏文件/" data-id="ck8n5sxav001rp8lwzjyum1oq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-machine_learning/Recommend_System/bandit算法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/03/machine_learning/Recommend_System/bandit算法/" class="article-date">
  <time datetime="2019-09-03T13:15:07.000Z" itemprop="datePublished">2019-09-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/03/machine_learning/Recommend_System/bandit算法/">Bandit算法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="MAB问题"><a href="#MAB问题" class="headerlink" title="MAB问题"></a>MAB问题</h2><p>一个赌徒，要去摇老虎机，走进赌场一看，一排老虎机，外表一模一样，但是每个老虎机吐钱的概率可不一样，他不知道每个老虎机吐钱的概率可不一样，<br>他不知道每个老虎机吐钱的概率分布是什么，那么想最大化收益该怎么整？</p>
<p>这就是多臂赌博机问题，简称MAB问题。</p>
<ol>
<li>假设一个用户对不同类别的内容感兴趣程度不同，当推荐系统初次见到这个用户时，怎么快速地知道他对每类内容的感兴趣程度？这也是推荐系统常常面对的冷启动问题。</li>
<li>假设系统中有若干广告库存物料，该给每个用户展示哪个广告，才能获得最大的点击收益，是不是每次都挑收益最好那个呢？</li>
<li>算法工程师又设计出了新的策略或者模型，如何既能知道它和旧模型相比谁更靠谱又对风险可控呢？</li>
</ol>
<p>推荐系统里面有两个顽疾，一个是冷启动，一个是探索利用问题，后者又称为 EE 问题：Exploit－Explore 问题。针对这两个顽疾，Bandit 算法可以入药。</p>
<h2 id="Bandit-算法"><a href="#Bandit-算法" class="headerlink" title="Bandit 算法"></a>Bandit 算法</h2><p>Bandit 算法并不是指一个算法，而是一类算法。<br>首先，来定义一下，如何衡量选择的好坏？Bandit 算法的思想是：看看选择会带来多少遗憾，遗憾越少越好。在 MAB 问题里，用来量化选择好坏的指标就是累计遗憾。<br><img src="/img/MAB1.png"></p>
<p>简单描述一下这个公式。公式有两部分构成：一个是遗憾，一个是累积。求和符号内部就表示每次选择的遗憾多少。</p>
<p>Wopt 就表示，每次都运气好，选择了最好的选择，该得到多少收益，WBi 就表示每一次实际选择得到的收益，两者之差就是“遗憾”的量化，在 T 次选择后，就有了累积遗憾。</p>
<p>在这个公式中：为了简化 MAB 问题，每个臂的收益不是 0，就是 1，也就是伯努利收益。</p>
<p>这个公式可以用来对比不同 Bandit 算法的效果：对同样的多臂问题，用不同的 Bandit 算法模拟试验相同次数，比比看哪个 Bandit 算法的累积遗憾增长得慢，那就是效果较好的算法。</p>
<p>Bandit 算法的套路就是：小心翼翼地试，越确定某个选择好，就多选择它，越确定某个选择差，就越来越少选择它。</p>
<p>如果某个选择实验次数较少，导致不确定好坏，那么就多给一些被选择机会，直到确定了它是金子还是石头。简单说就是，把选择的机会给“确定好的”和“还不确定的”。</p>
<p>Bandit 算法中有几个关键元素：臂，回报，环境。</p>
<ol>
<li>臂：是每次选择的候选项，好比就是老虎机，有几个选项就有几个臂；</li>
<li>回报：就是选择一个臂之后得到的奖励，好比选择一个老虎机之后吐出来的金币；</li>
<li>环境：就是决定每个臂不同的那些因素，统称为环境。</li>
</ol>
<p>将这个几个关键元素对应到推荐系统中来。</p>
<ol>
<li>臂：每次推荐要选择候选池，可能是具体物品，也可能是推荐策略，也可能是物品类别；</li>
<li>回报：用户是否对推荐结果喜欢，喜欢了就是正面的回报，没有买账就是负面回报或者零回报；</li>
<li>环境：推荐系统面临的这个用户就是不可捉摸的环境。</li>
</ol>
<p>下面直接开始陈列出最常用的几个 Bandit 算法。</p>
<h3 id="汤普森采样算法"><a href="#汤普森采样算法" class="headerlink" title="汤普森采样算法"></a>汤普森采样算法</h3><p>原理： 假设每个臂是否产生收益，起决定作用的是背后有一个概率分布，产生收益的概率为p。</p>
<p>每个臂背后绑定了一个概率分布；每次做选择是，让每个臂的概率分布各自独立产生一个随机数，按照这个随机数排序，输出产生最大随机数那个臂对应的物品。</p>
<p>关键在于每个臂背后的概率分布，是一个Beta分布<br><img src="/img/MAB2.png"></p>
<p>Beta分布有a和b两个参数。这两个参数决定了分布的形状和位置：</p>
<ol>
<li>当a+b 值越大，分布曲线就越窄，分布就越集中，产生的随机数会容易靠近中心位置；</li>
<li>当a/(a+b)的值越大，分布的中心位置就越靠近1，反之就越靠近0，产生的随机数也相应的更容易靠近1或0.</li>
</ol>
<p>把Beta分布的a参数看成是推荐后得到用户点击的次数，把分布的b参数看成是没有得到用户点击的次数。</p>
<ol>
<li>取出每一个候选对应的参数 a 和 b；</li>
<li>为每个候选用 a 和 b 作为参数，用贝塔分布产生一个随机数；</li>
<li>按照随机数排序，输出最大值对应的候选；</li>
<li>观察用户反馈，如果用户点击则将对应候选的 a 加 1，否则 b 加 1；</li>
</ol>
<p>注意，实际上在推荐系统中，要为每一个用户都保存一套参数，比如候选有 m 个，用户有 n 个，那么就要保存 2<em>m</em>n 个参数。</p>
<p>汤普森采样为什么有效呢？解释一下。</p>
<ol>
<li>如果一个候选被选中的次数很多，也就是 a+b 很大了，它的分布会很窄，换句话说这个候选的收益已经非常确定了，用它产生随机数，基本上就在中心位置附近，接近平均收益。</li>
<li>如果一个候选不但 a+b 很大，即分布很窄，而且 a/(a+b) 也很大，接近 1，那就确定这是个好的候选项，平均收益很好，每次选择很占优势，就进入利用阶段，反之则几乎再无出头之日。</li>
<li>如果一个候选的 a+b 很小，分布很宽，也就是没有被选择太多次，说明这个候选是好是坏还不太确定，那么用它产生随机数就有可能得到一个较大的随机数，在排序时被优先输出，这就起到了前面说的探索作用。</li>
</ol>
<p>用 Python 实现汤普森采样就一行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import pymc</span><br><span class="line">choice = numpy.argmax(pymc.rbeta(1 + self.wins, 1 + self.trials - self.wins))</span><br></pre></td></tr></table></figure></p>
<h3 id="UCB算法"><a href="#UCB算法" class="headerlink" title="UCB算法"></a>UCB算法</h3><p>第二个常用的 Bandit 算法就是 UCB 算法，UCB 算法全称是 Upper Confidence Bound，即置信区间上界。它也为每个臂评分，每次选择评分最高的候选臂输出，每次输出后观察用户反馈，回来更新候选臂的参数。</p>
<p>每个臂的评分公式为：<br><img src="/img/MAB3.png"></p>
<p>公式有两部分，加号前面是这个候选臂到目前的平均收益，反应了它的效果，后面的叫做 Bonus，本质上是均值的标准差，反应了候选臂效果的不确定性，就是置信区间的上边界。t 是目前的总选择次数，Tjt 是每个臂被选择次数。</p>
<p>观察这个公式，如果一个候选的被选择次数很少，即 Tjt 很小，那么它的 Bonus 就会较大，在最后排序输出时有优势，这个 Bonus 反映了一个候选的收益置信区间宽度，Bonus 越大，候选的平均收益置信区间越宽，越不确定，越需要更多的选择机会。</p>
<p>反之如果平均收益很大，就是说加号左边很大，也会在被选择时有优势。</p>
<p>这个评分公式也和汤普森采样是一样的思想：</p>
<ol>
<li>以每个候选的平均收益为基准线进行选择；</li>
<li>对于被选择次数不足的给予照顾；</li>
<li>选择倾向的是那些确定收益较好的候选。</li>
</ol>
<h3 id="Epsilon-贪婪算法"><a href="#Epsilon-贪婪算法" class="headerlink" title="Epsilon 贪婪算法"></a>Epsilon 贪婪算法</h3><p>这是一个朴素的算法，也很简单有效，思想有点类似模拟退火，做法如下。</p>
<ol>
<li>先选一个 (0,1) 之间较小的数，叫做 Epsilon，也是这个算法名字来历。</li>
<li>每次以概率 Epsilon 做一件事：所有候选臂中随机选一个，以 1-Epsilon 的概率去选择平均收益最大的那个臂。</li>
</ol>
<p>是不是简单粗暴？Epsilon 的值可以控制对探索和利用的权衡程度。这个值越接近 0，在探索上就越保守。</p>
<p>和这种做法相似，还有一个更朴素的做法：先试几次，等每个臂都统计到收益之后，就一直选均值最大那个臂。</p>
<p>##效果对比<br>以上几个算法，可以简单用模拟试验的方式对比其效果，如图所示。<br><img src="/img/MAB4.png"></p>
<p>横坐标是模拟次数增加，可以看成随着时间推移，纵坐标就是累积遗憾，越高说明搞砸的次数越多。在模拟后期，基本上各种算法优劣一目了然。从上到下分别是下面几种。</p>
<p>完全随机：就是不顾用户反馈的做法。<br>朴素选择：就是认准一个效果好的，一直推。<br>Epsilon 贪婪算法：每次以小概率尝试新的，大概率选择效果好的。<br>UCB：每次都会给予机会较少的候选一些倾向。<br>汤普森采样：用贝塔分布管理每一个候选的效果。</p>
<p>UCB 算法和汤普森采样都显著优秀很多。</p>
<p>##冷启动</p>
<p>推荐系统冷启动问题可以用 Bandit 算法来解决一部分。</p>
<p>大致思路如下：</p>
<ol>
<li>用分类或者 Topic 来表示每个用户兴趣，我们可以通过几次试验，来刻画出新用户心目中对每个 Topic 的感兴趣概率。</li>
<li>这里，如果用户对某个 Topic 感兴趣，就表示我们得到了收益，如果推给了它不感兴趣的 Topic，推荐系统就表示很遗憾 (regret) 了。</li>
<li>当一个新用户来了，针对这个用户，我们用汤普森采样为每一个 Topic 采样一个随机数，排序后，输出采样值 Top N 的推荐 Item。注意，这里一次选择了 Top N 个候选臂。</li>
<li>等着获取用户的反馈，没有反馈则更新对应 Topic 的 b 值，点击了则更新对应 Topic 的 a 值。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/09/03/machine_learning/Recommend_System/bandit算法/" data-id="ck8n5sxbk002hp8lwpimv9qjz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-mysql/mysql性能优化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/26/mysql/mysql性能优化/" class="article-date">
  <time datetime="2019-06-26T12:43:31.000Z" itemprop="datePublished">2019-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/26/mysql/mysql性能优化/">Post</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>in() 加子查询 修改为 关联查询</li>
<li>count() 统计非空的行数；直接统计整表的行数用count(<em>) 而不是count(某个列)，因为</em>不会扩展成所有的列，<br>而是会忽略所有列而直接统计所有行数；count(某个列) 会统计这个列非空的行数；</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/26/mysql/mysql性能优化/" data-id="ck8n5sxay001wp8lwfgzzbxi7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-mysql/导入导出sql文件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/mysql/导入导出sql文件/" class="article-date">
  <time datetime="2019-05-15T03:41:12.000Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/15/mysql/导入导出sql文件/">导入导出Sql文件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>window下</p>
<p>1.导出整个数据库<br>mysqldump -h host -u 用户名 -p 数据库名 &gt; 导出的文件名<br>mysqldump -h host -u dbuser -p dbname &gt; dbname.sql</p>
<p>2.导出一个表<br>mysqldump -h host -u 用户名 -p 数据库名 表名&gt; 导出的文件名<br>mysqldump -h host -u dbuser -p dbname users&gt; dbname_users.sql</p>
<p>3.导出一个数据库结构<br>mysqldump -h host -u dbuser -p -d –add-drop-table dbname &gt;d:/dbname_db.sql<br>-d 没有数据 –add-drop-table 在每个create语句之前增加一个drop table</p>
<p>4.导入数据库<br>常用source 命令<br>进入mysql数据库控制台，如<br>mysql -u root -p<br>mysql&gt;use 数据库<br>然后使用source命令，后面参数为脚本文件(如这里用到的.sql)<br>mysql&gt;source d:/dbname.sql</p>
<ol>
<li>导入数据到数据库</li>
</ol>
<p>mysql -h host -uroot -D数据库名 </p>
<ol>
<li>导入数据到数据库中得某个表</li>
</ol>
<p>mysql -h host -uroot -D数据库名  表名</p>
<p>D:\APMServ5.2.6\MySQL5.1\bin&gt;mysqldump -u root -p  erp lightinthebox_tags &gt; ligh<br>tinthebox.sql</p>
<p>linux下</p>
<p>一、导出数据库用mysqldump命令（注意mysql的安装路径，即此命令的路径）：<br>1、导出数据和表结构：<br>mysqldump -h host -u用户名 -p密码 数据库名 &gt; 数据库名.sql<br>例如 mysqldump -h host -uroot -p abc &gt; abc.sql<br>敲回车后会提示输入密码</p>
<p>2、只导出表结构<br>mysqldump -h host -u用户名 -p密码 -d 数据库名 &gt; 数据库名.sql<br>例如 mysqldump -uroot -p -d abc &gt; abc.sql</p>
<p>二、导入数据库<br>source /home/abc/abc.sql;<br>方法二：<br>mysql -u用户名 -p密码 数据库名 &lt; 数据库名.sql<br>例如 mysql -h host -uabc_f -p abc &lt; abc.sql</p>
<p>常见问题：</p>
<ol>
<li><p>Access denied; you need (at least one of) the SUPER privilege(s) for this operation</p>
<p> Either remove the DEFINER=.. statement from your sqldump file, or replace the user values with CURRENT_USER.<br> The MySQL server provided by RDS does not allow a DEFINER syntax for another user (in my experience).<br> You can use a sed script to remove them from the file:</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &apos;s/\sDEFINER=`[^`]*`@`[^`]*`//g&apos; -i oldfile.sql</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/mysql/导入导出sql文件/" data-id="ck8n5sxb0001yp8lwjh52eaex" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="posts-linux/kill-process" class="article article-type-posts" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/14/linux/kill-process/" class="article-date">
  <time datetime="2019-04-14T04:15:49.000Z" itemprop="datePublished">2019-04-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/14/linux/kill-process/">Kill Process</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>大家对kill -9 肯定非常熟悉，在工作中也经常用到。特别是你去重启tomcat时。可是多半看来，我们对-9的理解只是表面而已。</p>
<p>很少有人（包括我）认真的去了解一下 kill -n 这个n到底是什么东东。自我批评一下。</p>
<p>好吧。我们来好好的认识一下这个熟悉的陌生人。</p>
<p>1）kill<br>kill pid</p>
<p>2）kill -l（查看Linux/Unix的信号变量）</p>
<p>3）（kill pid） 、（ kill -15 pid）</p>
<p>系统会发送一个SIGTERM的信号给对应的程序。当程序接收到该signal后，将会发生以下的事情</p>
<ol>
<li>程序立刻停止</li>
<li>当程序释放相应资源后再停止</li>
<li>程序可能仍然继续运行</li>
</ol>
<p>大部分程序接收到SIGTERM信号后，会先释放自己的资源，然后在停止。但是也有程序可以在接受到信号量后，做一些其他的事情，并且这些事情是可以<br>配置的。如果程序正在等待IO，可能就不会立马做出相应。<br>也就是说，SIGTERM多半是会被阻塞的、忽略。</p>
<p>4）kill  -9 pid</p>
<p>你不是可以不响应 SIGTERM吗？？那好，我给你下一道必杀令，我看你还不乖乖的。多半admin会用这个命令</p>
<p>不过，也不是所有的程序都会乖乖听话，总有那些状态下的程序无法立刻相应。</p>
<p>附录：</p>
<p>linux signals</p>
<p>Signal Name    Number    Description<br>SIGHUP    1    Hangup (POSIX)<br>SIGINT    2    Terminal interrupt (ANSI)<br>SIGQUIT    3    Terminal quit (POSIX)<br>SIGILL    4    Illegal instruction (ANSI)<br>SIGTRAP    5    Trace trap (POSIX)<br>SIGIOT    6    IOT Trap (4.2 BSD)<br>SIGBUS    7    BUS error (4.2 BSD)<br>SIGFPE    8    Floating point exception (ANSI)<br>SIGKILL    9    Kill(can’t be caught or ignored) (POSIX)<br>SIGUSR1    10    User defined signal 1 (POSIX)<br>SIGSEGV    11    Invalid memory segment access (ANSI)<br>SIGUSR2    12    User defined signal 2 (POSIX)<br>SIGPIPE    13    Write on a pipe with no reader, Broken pipe (POSIX)<br>SIGALRM    14    Alarm clock (POSIX)<br>SIGTERM    15    Termination (ANSI)<br>SIGSTKFLT    16    Stack fault<br>SIGCHLD    17    Child process has stopped or exited, changed (POSIX)<br>SIGCONT    18    Continue executing, if stopped (POSIX)<br>SIGSTOP    19    Stop executing(can’t be caught or ignored) (POSIX)<br>SIGTSTP    20    Terminal stop signal (POSIX)<br>SIGTTIN    21    Background process trying to read, from TTY (POSIX)<br>SIGTTOU    22    Background process trying to write, to TTY (POSIX)<br>SIGURG    23    Urgent condition on socket (4.2 BSD)<br>SIGXCPU    24    CPU limit exceeded (4.2 BSD)<br>SIGXFSZ    25    File size limit exceeded (4.2 BSD)<br>SIGVTALRM    26    Virtual alarm clock (4.2 BSD)<br>SIGPROF    27    Profiling alarm clock (4.2 BSD)<br>SIGWINCH    28    Window size change (4.3 BSD, Sun)<br>SIGIO    29    I/O now possible (4.2 BSD)<br>SIGPWR    30    Power failure restart (System V)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/14/linux/kill-process/" data-id="ck8n5sxae0016p8lw4pegre6a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP-TCP-IP/">HTTP TCP/IP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/career/">career</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hive/">hive</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-linux/">python linux</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/HTTP-TCP-IP/" style="font-size: 17.5px;">HTTP TCP/IP</a> <a href="/tags/algorithm/" style="font-size: 15px;">algorithm</a> <a href="/tags/career/" style="font-size: 10px;">career</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/hive/" style="font-size: 17.5px;">hive</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/linux/" style="font-size: 20px;">linux</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/python/" style="font-size: 12.5px;">python</a> <a href="/tags/python-linux/" style="font-size: 10px;">python linux</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/02/linux/linux vi 中替换不可见字符/">Linux Vi 中替换不可见字符</a>
          </li>
        
          <li>
            <a href="/2020/03/03/linux/删除中文名文件/">删除中文名文件.Md</a>
          </li>
        
          <li>
            <a href="/2019/11/02/hive/groupby/">Groupby</a>
          </li>
        
          <li>
            <a href="/2019/11/01/linux/rz传大文件连接经常断开解决办法/">Rz传大文件连接经常断开解决办法</a>
          </li>
        
          <li>
            <a href="/2019/10/16/hive/hive导入txt/">Hive导入txt</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 ZHUOQI LI<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>